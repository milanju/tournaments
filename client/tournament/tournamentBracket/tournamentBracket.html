<template name="tournamentBracket">
  <section class="container-fluid bracket">
    <table>
      <tr>
        {{#each bracket}}
          <th>
            ro{{this.ro}}, best of {{this.mode}}
          </th>
        {{/each}}
      </tr>
      <tr>
        {{#each bracket}}
          <td>
            {{#each this.participants}}
              {{#if isEven}}
                {{#if isParticipant}}
                  <div class="match-player match-player-1 {{raceBackground}}" style="margin-top: {{margin}}">
                    {{this.account}}
                    <div class="match-player-score">
                      {{#if beingEdited}}
                        <input id="edit-score-{{this._id}}" class="edit-score" type="text" value="{{this.score}}">
                      {{else}}
                        {{this.score}}
                      {{/if}}
                    </div>
                    {{#if isInRole 'admin'}}
                      <span class="glyphicon glyphicon-pencil edit-match" aria-hidden="true"></span>
                      {{#if beingEdited}}
                        <span class="glyphicon glyphicon-menu-left player-set-back-a" aria-hidden="true"></span>
                      {{/if}}
                    {{/if}}
                    <div class="bracket-line-top-right" style="{{rightTopLineAdjust}}"></div>
                    <div class="bracket-line-bottom-right" style="{{rightBottomLineAdjust}}"></div>
                    {{#if isFourth}}
                      <div class="bracket-line-top-left" style="height: {{lineHeight}}"></div>
                    {{else}}
                      <div class="bracket-line-bottom-left" style="height: {{lineHeight}}"></div>
                    {{/if}}
                  </div>
                {{else}}
                  <div class="match-player match-player-1" style="margin-top: {{margin}}">
                    -
                    <div class="match-player-score">
                      -
                    </div>
                    {{#if isInRole 'admin'}}
                      <span class="glyphicon glyphicon-pencil edit-match" aria-hidden="true"></span>
                    {{/if}}
                    <div class="bracket-line-top-right" style="{{rightTopLineAdjust}}"></div>
                    <div class="bracket-line-bottom-right" style="{{rightBottomLineAdjust}}"></div>
                    {{#if isFourth}}
                      <div class="bracket-line-top-left" style="height: {{lineHeight}}"></div>
                    {{else}}
                      <div class="bracket-line-bottom-left" style="height: {{lineHeight}}"></div>
                    {{/if}}
                  </div>
                {{/if}}
              {{else}}
                {{#if isParticipant}}
                  <div class="match-player match-player-2 {{raceBackground}}" style="margin-bottom: {{margin}}">
                    {{this.account}}
                    <div class="match-player-score">
                      {{#if beingEdited}}
                        <input id="edit-score-{{this._id}}" class="edit-score" type="text" value="{{this.score}}">
                      {{else}}
                        {{this.score}}
                      {{/if}}
                    </div>
                    {{#if isInRole 'admin'}}
                      {{#if beingEdited}}
                        <span class="glyphicon glyphicon-menu-left player-set-back-b" aria-hidden="true"></span>
                      {{/if}}
                    {{/if}}
                  </div>
                {{else}}
                  <div class="match-player match-player-2" style="margin-bottom: {{margin}}">
                    -
                    <div class="match-player-score">
                      -
                    </div>
                  </div>
                {{/if}}
              {{/if}}
            {{/each}}
          </td>
        {{/each}}
      </tr>
    </table>
  </section>
</template>
