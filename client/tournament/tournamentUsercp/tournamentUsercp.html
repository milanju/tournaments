<template name="tournamentUsercp">
  {{#with tournament}}
    <div class="panel panel-default">
      <div class="panel-body">
        {{#if currentUser}}
          {{#if isParticipant}}
            {{#if signupsOpen}}
              <div class="usercp-toolbar">
                {{#if checkin}}
                  <p>You are signed up as {{account}}. You need to check in now!</p>
                  <button id="tournament-usercp-checkin" class="btn btn-primary">Check In</button>
                {{else}}
                  {{#if statusCheckin}}
                    <p>You are checked in as {{account}}. Waiting for tournament to start.</p>
                  {{else}}
                    <p>You are signed up as {{account}}.</p>
                  {{/if}}
                {{/if}}
                <button id="tournament-usercp-signout" class="btn btn-primary">Sign me out :(!</button>
              </div>
            {{/if}}
            {{#if running}}
              {{#if isParticipating}}
                {{#if hasOpenMatch}}
                  {{> tournamentUsercpReport tournamentId=this._id}}
                {{else}}
                  {{#if droppedOut}}
                    You dropped out of the tournament.
                  {{else}}
                    Waiting for opponent.
                  {{/if}}
                {{/if}}
              {{else}}
                <p>You signed up but didn't check in. If there are still open slots try contacting an admin.</p>
              {{/if}}
            {{/if}}
          {{else}}
            {{#if signupsOpen}}
              {{#if account}}
                <p>You may sign up for this tournament as {{account}}.</p>
                <button id="tournament-usercp-signup" class="btn btn-primary">Sign me up!</button>
              {{else}}
              {{/if}}
            {{else}}
              Signups for this Tournament are closed.
            {{/if}}
          {{/if}}
        {{else}}
          Login to participate in this tournament.
        {{/if}}
      </div>
    </div>
  {{/with}}
</template>
